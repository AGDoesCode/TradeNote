@@include('components/spinnerLoadingPage.html')
<div v-show="!spinnerLoadingPage">
    <div class="row mt-3 mb-3">
        <div class="col-12 mb-2">
            <div class="row">
                <div class="col">
                    <select v-model="setup.type" class="form-select">
                        <option v-for="item in setupType" v-bind:value="item.value">{{item.label}}</option>
                    </select>
                </div>
                <div class="col">
                    <input type="datetime-local" v-bind:step="setup.type == 'setup' ? '' : '1'" class="form-control" v-bind:value="setup.hasOwnProperty('dateUnix') ? datetimeLocalFormat(setup.dateUnix) : currentDate" v-on:input="screenshotUpdateDate($event.target.value)"/>
                </div>
                <div class="col">
                    <input type="text" class="form-control" v-bind:value="setup.hasOwnProperty('symbol') ? setup.symbol : ''" v-on:input="setup.symbol = $event.target.value" placeholder="Symbol"/>
                </div>

            </div>
        </div>
        <div class="col-12">
            <div class="row">

                <div v-if="setup.type == 'entry'" class="col">
                    <select v-model="setup.side" class="form-select">
                        <option v-for="item in entrySide" v-bind:value="item.value">{{item.label}}</option>
                    </select>
                </div>
                <!-- Patterns -->
                <div class="col">
                    <select v-on:change="tradeSetupChange($event.target.value, 'pattern')" class="form-select">
                        <option value='null' selected>Pattern</option>
                        <option v-for="item in patterns.filter(r => r.active == true)" v-bind:value="item.objectId" v-bind:selected="item.objectId == setup.pattern">{{item.name}}</option>
                    </select>
                </div>
                <!-- Mistakes -->
                <div class="col">
                    <select v-on:change="tradeSetupChange($event.target.value, 'mistake')" class="form-select">
                        <option value='null' selected>Mistake</option>
                        <option v-for="item in mistakes.filter(r => r.active == true)" v-bind:value="item.objectId" v-bind:selected="item.objectId == setup.mistake">{{item.name}}</option>
                    </select>
                </div>

            </div>
        </div>
    </div>
    <div class="mt-3">
        <input type="file" @change="setupImageUpload"/>
    </div>
    <div class="mt-3" id="imagePreview" style="position: relative; display: flex; flex-direction: column; align-items: center; padding-top: 50px;">
        <img id="setupDiv" v-bind:src="setup.originalBase64" style="position: relative;" v-bind:key="renderData" crossorigin="anonymous"/>
        <img v-bind:src="setup.annotatedBase64" style="position: absolute;" v-on:click="setupMarkerArea()"/>
    </div>
    <p class="fst-italic fw-lighter text-center" v-show="setup.originalBase64">
        <small>Click image to mark & annotate</small>
    </p>

    <div class="mt-3 mb-3">
        <button type="button" v-on:click="saveScreenshot" class="btn btn-success btn-sm">Submit</button>
    </div>
    <div class="mt-3">
        <button type="cancel" onclick="location.href = '/screenshots';" class="btn btn-outline-secondary btn-sm">Cancel</button>
    </div>
</div>